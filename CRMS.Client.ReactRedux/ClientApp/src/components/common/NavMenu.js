import React, { Component } from 'react';
import { Collapse, Container, Navbar, NavbarToggler, NavItem, NavLink } from 'reactstrap';
import { Link } from 'react-router-dom';
import './NavMenu.css';
import FixedMiniMenu from './FixedMiniMenu';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faBoxes, faCubes, faFileInvoice, faFileSignature, faHome, faSignOutAlt, faUserCircle, faUsers, faUserShield } from '@fortawesome/free-solid-svg-icons';
import { connect } from 'react-redux';

class NavMenu extends Component {
    static displayName = NavMenu.name;

    constructor(props) {
        super(props);

        this.toggleNavbar = this.toggleNavbar.bind(this);
        this.state = {
            collapsed: true
        };
    }

    toggleNavbar() {
        this.setState({
            collapsed: !this.state.collapsed
        });
    }

    render() {
        const { userState } = this.props;
        let adminRole = undefined;

        if (userState.roles !== undefined) {
            adminRole = userState.roles.find(r => r == 'admin');
        }

        return (
            <>
                <header className="head-itl navbar-fixed-top">

                    {/*TOP*/}
                    <div className="top">
                        <img alt="" className="top-img no-select" src="/img/crms-top.png" />
                        <FixedMiniMenu />
                    </div>

                    {/*NAVBAR*/}
                    <Navbar className="navbar-expand-sm navbar-toggleable-sm navbar-light  navbar-itl-bg border-bottom box-shadow mb-3 ">
                        <Container>
                            <NavbarToggler onClick={this.toggleNavbar} className="mr-2" />
                            <Collapse className="d-sm-inline-flex d-md-inline-flex inline" isOpen={!this.state.collapsed} navbar>
                                <ul className="navbar-nav flex-grow">

                                    <NavItem>
                                        <a href="https://secure.e-conomic.com/sales/invoicing/invoices" target="_blank">{economicLogoSvg}</a>
                                    </NavItem>



                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text " to="/"><FontAwesomeIcon className="fa-lg" icon={faHome} />FORSIDE</NavLink>
                                    </NavItem>

                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text " to="/Customers"><FontAwesomeIcon className="fa-lg" icon={faUsers} />KUNDER</NavLink>
                                    </NavItem>

                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text" to="/Products"><FontAwesomeIcon className="fa-lg" icon={faCubes} />PRODUKTER</NavLink>
                                    </NavItem>

                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text " to="/Subscriptions"><FontAwesomeIcon className="fa-lg" icon={faBoxes} />ABONNEMENTER</NavLink>
                                    </NavItem>


                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text " to="/Invoices"><FontAwesomeIcon className="fa-lg" icon={faFileInvoice} />FAKTURAER</NavLink>
                                    </NavItem>

                                    {adminRole !== undefined && adminRole !== "" ?
                                        <NavItem>
                                            <NavLink tag={Link} className="itl-nav-item-text " to="/Admin"><FontAwesomeIcon className="fa-lg" icon={faUserShield} />ADMIN</NavLink>
                                        </NavItem>
                                        : ''}



                                    <NavItem>
                                        <p className="itl-nav-item-text" ><FontAwesomeIcon className="fa-lg" icon={faUserCircle} />{userState.email} </p>
                                    </NavItem>


                                    <NavItem>
                                        <NavLink tag={Link} className="itl-nav-item-text " to="/LogOut"><FontAwesomeIcon className="fa-lg" icon={faSignOutAlt} /><span className="no-wrap">LOG UD</span></NavLink>
                                    </NavItem>


                                </ul>
                            </Collapse>
                        </Container>
                    </Navbar>
                </header>
            </>
        );
    }
}

const mapStateToProps = state => ({

    userState: state.userState.item,
    Users: state.users
});
export default connect(mapStateToProps)(NavMenu);








const economicLogoSvg = <svg className="economic-logo mt-5 mr-4" viewBox="0 0 127 13" xmlns="http://www.w3.org/2000/svg"><g><path d="M5.716016 1.34924242c3.029712.25015152 6.374384 1.74121213 8.2804 3.86060606 2.4384 2.71227273 1.603248 5.42454542-1.877568 6.05681822-3.480816.6322727-8.2804-1.0498485-10.720832-3.76212125C-.471424 5.42848485-.41656 3.35242424 1.27 2.2080303l9.67232 6.92742425-5.226304-7.78621213z" fillRule="nonzero"></path><path d="M53.67528 11.2509091l-1.2192-4.72727274c-.176784-.56333333-.24384-1.12666666-.36576-1.6880303h-.026416c-.107696.57515152-.148336 1.13848485-.308864 1.71363636l-1.22936 4.70954548h-2.101088l2.822448-9.87409093h1.647952l2.942336 9.86424243-2.162048.0019697z" fillRule="nonzero"></path><path d="M21.553424 1.38469697l1.2192 4.72727273c.174752.56333333.241808 1.12469697.363728 1.6880303h.026416c.107696-.57515152.148336-1.13848485.310896-1.71363636l1.2192-4.70954546h2.105152L23.9776 11.2410606h-1.64592l-2.938272-9.85636363h2.160016z" fillRule="nonzero"></path><path fillRule="nonzero" d="M28.313888 1.38666667h2.01168v9.86424243h-2.01168z"></path><path fillRule="nonzero" d="M41.694608 1.38666667l.983488 5.82045454h.026416l.808736-5.82045454h2.700528l1.0668 9.86424243h-2.064512l-.485648-7.10469698h-.028448l-.323088 2.43257576-.865632 4.67212122h-1.550416l-.98552-4.72333334L40.64 4.32939394v-.18318182h-.026416l-.296672 7.10469698h-2.160016l.890016-9.86424243z"></path><path d="M35.310064 1.38469697c-.3577988.27917284-.6303655.64756811-.788416 1.06560606-.526288 1.22909091.036576 2.16666667.534416 3.00575758.073152.12409091.148336.24818181.217424.37227272 1.085088 1.80424243 1.515872 3.13378788.705104 5.02863637-.056896.1339394-.191008.3939394-.191008.3939394h-2.424176c.3204254-.2482168.5741848-.5678542.739648-.9316667.556768-1.30196967-.099568-2.49166664-.735584-3.64393937-.764032-1.37878788-1.552448-2.81863636-.715264-4.78045455.079248-.18712121.254-.50424242.254-.50424242l2.403856-.00590909z" fillRule="nonzero"></path></g><path className="logo__bar" d="M61.496448 0v12.8680303" strokeWidth="1.68"></path><g className="logo__economic"><path d="M70.841616 9.70863636c-.999744 0-1.7888373-.29479798-2.36728-.88439394-.5784427-.58959596-.867664-1.40964646-.867664-2.46015151 0-1.05707071.2709333-1.89681818.8128-2.51924243.5304376-.61728629 1.3256457-.96197654 2.15392-.93363636.7626734-.03509605 1.5014967.26264579 2.013712.81151515.4944533.53969697.7410027 1.25272728.739648 2.13909091v.62833334h-4.659376c.022352.77015151.221488 1.35318181.6096 1.7530303.388112.39984848.916432.59090909 1.607312.59090909.743701-.00293405 1.4788698-.15377248 2.160016-.44318182v.88636364c-.3298144.14174433-.6736336.25063692-1.02616.325-.3855929.07188992-.7778273.1048941-1.170432.09848485m-.27432-5.95242425c-.4900374-.02138848-.9649513.16736328-1.298448.51606061-.3477231.40033357-.5485505.90121019-.570992 1.42409091h3.53568c0-.62636364-.14224-1.1069697-.430784-1.43984849-.3103282-.34233825-.7661196-.52691285-1.235456-.50030303" fillRule="nonzero"></path><path d="M75.053952 6.25575758c-.0151689-.21657791.0536783-.43083638.19304-.60075758.1381463-.1429001.3347885-.21871211.536448-.20681818.2081607-.01140173.4114497.0638378.5588.20681818.2680858.35762602.2680858.84191943 0 1.19954545-.3018073.26987298-.7638609.27916874-1.07696.02166667-.1529999-.17086259-.2265151-.39533511-.2032-.62045454" fillRule="nonzero"></path><path d="M81.586832 9.70863636c-.979424 0-1.73736-.29217171-2.273808-.87651515-.536448-.58434343-.8073813-1.41095959-.8128-2.47984848 0-1.09777778.2709333-1.94540404.8128-2.54287879.5418667-.59747475 1.318768-.89686869 2.330704-.89818182.3279782-.00003668.654999.03430434.97536.10242424.2639542.04817256.5206342.12824173.764032.23833334l-.31496.845c-.2397537-.0929503-.4871838-.16608946-.739648-.21863637-.2330197-.05435362-.4715521-.08342113-.7112-.08666666-1.373632 0-2.060448.84959596-2.060448 2.54878788 0 .80494949.1673013 1.42343434.501904 1.85545454.33528.42939394.83312.64606061 1.491488.64606061.5966181-.00678768 1.1861142-.12655871 1.735328-.35257576v.87848485c-.5339642.24467285-1.120715.3615322-1.710944.34075757" fillRule="nonzero"></path><path d="M90.690192 6.30893939c0 1.06757576-.278384 1.90207071-.835152 2.50348485-.556768.60141414-1.3241867.90146465-2.302256.90015152-.5660565.00980534-1.1238362-.13269357-1.611376-.41166667-.4744234-.28111893-.8520726-.69243374-1.085088-1.18181818-.2674171-.5661279-.3987341-1.18372355-.384048-1.80621212 0-1.06888889.2756747-1.90207071.827024-2.49954546.5513493-.59747474 1.316736-.89555555 2.29616-.89424242.8559447-.03726298 1.6841715.29875604 2.257552.91590909.556768.61060606.8358293 1.43656566.837184 2.47787879m-5.155184 0c0 .83777778.17272 1.47595959.51816 1.91454545.34544.43858586.85344.65787879 1.524.65787879s1.1799147-.21863636 1.528064-.65590909.522224-1.07611111.522224-1.91651515c0-.83515152-.1740747-1.46873738-.522224-1.90075758-.3481493-.4320202-.861568-.64868687-1.540256-.65-.67056 0-1.176528.21469697-1.517904.64015152-.341376.42545454-.512064 1.06363636-.512064 1.91060606" fillRule="nonzero"></path><path d="M96.989392 9.58848485V5.34575758c0-.53444445-.1253067-.9329798-.37592-1.19560606-.251968-.2639394-.644144-.3939394-1.180592-.3939394-.707136 0-1.225296.18580808-1.55448.55742424-.329184.37161617-.493776.98419192-.493776 1.83772728v3.43909091h-1.02616V3.03136364h.83312l.168656.89621212h.048768c.213947-.32669621.5199877-.58712571.881888-.75045455.3956439-.18075251.8285923-.27169306 1.265936-.26590909.8128 0 1.4257867.19040404 1.83896.57121212.4131733.38080808.6163733.99010101.6096 1.82787879v4.27818182h-1.016z" fillRule="nonzero"></path><path d="M105.759504 6.30893939c0 1.06757576-.277707 1.90207071-.83312 2.50348485-.555413.60141414-1.322832.90146465-2.302256.90015152-.566147.01053143-1.124127-.1320188-1.611376-.41166667-.474546-.2815508-.852738-.69268701-1.08712-1.18181818-.2666505-.56630799-.397268-1.18388155-.382016-1.80621212 0-1.06888889.2756747-1.90207071.827024-2.49954546.551349-.59747474 1.316736-.89555555 2.29616-.89424242.948267 0 1.700107.30530303 2.25552.91590909.555413.61060606.834475 1.43525253.837184 2.47393939m-5.155184 0c0 .83777778.17272 1.4759596.51816 1.91454546.34544.43924242.855472.65787879 1.526032.65787879.589088.03526465 1.159066-.20939357 1.528064-.65590909.348149-.43727273.521547-1.07611112.520192-1.91651516-.001355-.84040404-.174752-1.4739899-.520192-1.90075757-.349504-.43333334-.861568-.65-1.540256-.65-.678688 0-1.17856.21469697-1.519936.64015151-.341376.42545455-.512064 1.06363637-.512064 1.91060606" fillRule="nonzero"></path><path d="M116.1796 9.58848485V5.32409091c0-.52525253-.115147-.91919192-.34544-1.18181818-.229616-.26-.58928-.3939394-1.074928-.3939394-.635339 0-1.109472.1779293-1.4224.53378788-.312928.35585859-.465328.90212121-.4572 1.63878788v3.66166667h-1.016V5.32409091c0-.52525253-.115824-.91919192-.347472-1.18181818-.229616-.26-.58928-.3939394-1.078992-.3939394-.642112 0-1.113536.1969697-1.410208.55939394-.296672.36242425-.449072.98484849-.449072 1.83575758v3.43909091h-1.016V3.03136364h.83312l.166624.89621212h.0508c.192326-.31859024.474248-.57752095.8128-.74651515.36534-.18279258.771528-.27547583 1.182624-.26984849 1.05664 0 1.748197.3709596 2.074672 1.11287879h.048768c.20551-.34688729.509496-.62924665.875792-.81348485.403616-.20402984.853472-.30695163 1.308608-.29939394.765387 0 1.338411.19040404 1.719072.57121212.380661.38080808.570992.99010101.570992 1.82787879v4.27818182h-1.02616z" fillRule="nonzero"></path><path d="M119.16664 1.25272727c-.016875-.18221767.045768-.36295537.17272-.49833333.243232-.21393452.614272-.21393452.857504 0 .129279.13353172.194239.31385023.178816.49636364.015568.18371514-.049334.36530074-.178816.50030303-.240531.22061195-.616973.22061195-.857504 0-.125769-.13683457-.188192-.31765204-.17272-.50030303v.00196969zm1.111504 8.33378788h-1.02616V3.03136364h1.02616v6.55515151z" fillRule="nonzero"></path><path d="M125.091952 9.70863636c-.979424 0-1.738037-.29217171-2.27584-.87651515-.537803-.58434343-.808736-1.41095959-.8128-2.47984848 0-1.09777778.270933-1.94540404.8128-2.54287879.541867-.59747475 1.318768-.89686869 2.330704-.89818182.327978-.00003668.654999.03430434.97536.10242424.264596.04821437.521943.12827865.766064.23833334l-.31496.845c-.239852-.09267891-.487258-.16581103-.739648-.21863637-.233047-.05421-.471563-.08327549-.7112-.08666666-1.373632 0-2.061125.84959596-2.06248 2.54878788 0 .80494949.167979 1.42343434.503936 1.85545454.33528.42939394.83312.64606061 1.491488.64606061.595961-.00679074 1.184792-.12656681 1.733296-.35257576v.87848485c-.533172.24487796-1.119318.3617557-1.708912.34075757" fillRule="nonzero"></path></g></svg>;


{/*<img className="top-img-left" src="/img/crms-left.png" />*/ }
{/*<img className="top-img-right" src="/img/crms-right.png" />*/ }